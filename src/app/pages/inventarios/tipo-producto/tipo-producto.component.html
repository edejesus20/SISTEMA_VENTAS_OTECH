<ng-template [ngIf]="mostrarDialogo==false">
<div style="max-width:150rem" class="ml-2"> 
    <br>
    <br>
    <div class="px-4 py-5 md:px-4 lg:px-4 surface-section">
        <div class="flex flex-column lg:flex-row lg:align-items-center 
        lg:justify-content-between relative" 
        style="top:-20px">
          <div>
            <div class=" mr-3 surface-card shadow-2 flex align-items-center justify-content-center p-2" 
                  style="width: auto; height: auto; max-width:600px; border-radius: 10px;">
                  <div class="logo-text " @fadeInOut >Registro de Tipo de Productos</div>
                  <!-- <img src="assets/almacenamiento.jpg" alt="Image" width="100" height="70"> -->
              </div>
              <div class="text-600 font-medium">
              </div>
          </div>
          <div class="mt-3 lg:mt-0">
              <button pbutton="" pripple="" label="Follow" icon="pi pi-plus-circle" 
              *ngIf="this.tipo_user == 'ADMINISTRADOR GENERAL' || tipo_user == 'CEO' || tipo_user == 'ADMINISTRADOR'"
              (click)="openNew()"
              class="p-element p-ripple  mr-2 p-button p-component">
              <span class="p-button-icon p-button-icon-left pi pi-plus-circle" aria-hidden="true"></span>
              <span class="p-button-label font-family">Registrar Tipo</span>
              <span class="p-ink" style="height: 116px; width: 116px; top: -40.5px; left: 20.375px;"></span>
              </button>
      
          </div>
        </div>

    <!-- <div class="surface-card shadow-2 border-round flex  flex-column md:flex-row">

        <div class="border-bottom-1 md:border-right-1 md:border-bottom-none surface-border flex-auto p-3">
            <div class="flex align-items-center mb-3">
                <i class="pi pi-shopping-cart text-orange-500 text-xl mr-2"></i>
                <span class="text-500 font-medium">Tipos mas Vendidos</span>
            </div>
          
            <div class="flex align-items-center">
                <i class="pi pi-arrow-up text-green-500 text-xl mr-2"></i>
                <span class="text-green-500 font-medium">+20   
                  <span class="block text-600 font-medium font-family">Fantasia</span></span>
            </div>
        </div>
        <div class="border-bottom-1 md:border-right-1 md:border-bottom-none surface-border flex-auto p-3">
            <div class="flex align-items-center mb-3">
                <i class="pi pi-shopping-cart text-blue-500 text-xl mr-2"></i>
                <span class="text-500 font-medium">Tipos Vendidos al por mayor</span>
            </div>
            <div class="flex align-items-center">
                <i class="pi pi-arrow-up text-green-500 text-xl mr-2"></i>
                <span class="text-green-500 font-medium">+5</span>
            </div>
        </div>
        <div class="border-bottom-1 md:border-right-1 md:border-bottom-none surface-border flex-auto p-3">
            <div class="flex align-items-center mb-3">
                <i class="pi pi-shopping-cart text-orange-500 text-xl mr-2"></i>
                <span class="text-500 font-medium">Tipos Vendidos al menudiao</span>
            </div>
            <div class="flex align-items-center">
                <i class="pi pi-arrow-up text-green-500 text-xl mr-2"></i>
                <span class="text-green-500 font-medium">+55</span>
            </div>
        </div>
    </div> -->
    <br>
    <hr> 
    <br>
    <div class="grid">
        <div class="col-12 sm:col-7 md:col-7">
            <div style="width:100%" class="mt-3">
                <span class="p-input-icon-left" style="width: 100%;" >
                    <i class="pi pi-search"></i>
                    <input type="text" pInputText placeholder="Buscador..." 
                    class="font-family" style="min-width: 100%"
                    (input)="Buscar($event, dt1)" />
                </span>
            </div>
        </div>
        <div class="col-12 sm:col-5 md:col-5">
    
            <div class="flex align-items-center">
                <div class="mb-3 ml-3 mt-3">
        
                <button pbutton="" pripple="" icon="pi pi-file"  (click)="dt1.exportCSV()"
                pTooltip="CSV" tooltipPosition="bottom"
                class="p-ripple p-element p-button-rounded  mr-2 p-button-info p-button 
                p-component p-button-icon-only"><span class="p-ink"></span>
                <span class="p-button-icon pi pi-file" aria-hidden="true"></span>
                <span aria-hidden="true" class="p-button-label">&nbsp;</span>
                </button>
                <button pbutton="" pripple="" icon="pi  pi-file-excel"  (click)="exportExcel()"
                pTooltip="XLS" tooltipPosition="bottom"
                class="p-ripple p-element p-button-rounded  mr-2 p-button-success p-button 
                p-component p-button-icon-only"><span class="p-ink"></span>
                <span class="p-button-icon pi pi-file-excel" aria-hidden="true"></span>
                <span aria-hidden="true" class="p-button-label">&nbsp;</span>
                </button>
                <button pbutton="" pripple="" icon="pi  pi pi-file-pdf"  (click)="gerenratePdf()"
                pTooltip="PDF" tooltipPosition="bottom"
                class="p-ripple p-element p-button-rounded  mr-2 p-button-warning p-button 
                p-component p-button-icon-only"><span class="p-ink"></span>
                <span class="p-button-icon pi  pi pi-file-pdf" aria-hidden="true"></span>
                <span aria-hidden="true" class="p-button-label">&nbsp;</span>
                </button>
                <!-- <button type="button" pButton pRipple icon="pi pi-filter" (click)="dt1.exportCSV({selectionOnly:true})" class="p-button-info ml-auto" pTooltip="Selection Only" tooltipPosition="bottom"></button> -->
                </div>
                <p-splitButton label="Acciones" [model]="items"
                *ngIf="this.tipo_user == 'ADMINISTRADOR GENERAL' || tipo_user == 'CEO' || tipo_user == 'ADMINISTRADOR'"
                styleClass="font-family p-button-raised p-button-rounded p-button-outlined 
                p-button-secondary  mr-2 mb-2 ">
                </p-splitButton>
        
            </div>
        </div>
      </div>
    <p-table #dt1 [value]="tipoProductos" 
      selectionMode="multiple" [(selection)]="selectedProducts" 
      id="todo"
      dataKey="id" styleClass="p-datatable-customers "
      [loading]="loading" responsiveLayout="scroll" 
      [style]="{'width':'100%','display':'grid'}"
      [paginator]="true" 
      [rowHover]="true"
      [rows]="5" [showCurrentPageReport]="true" 
      [rowsPerPageOptions]="[5,10,25,50]" 
      currentPageReportTemplate="Mostrando  {first} a {last} de {totalRecords} registros"
      [filterDelay]="0" 

      [columns]="cols"
      [globalFilterFields]="['nombre','descripcion','sede_nombre','status']">
      <ng-template pTemplate="header">
          <tr class="font-family">
              <!-- <th style="width: 3rem">
                  <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
              </th> -->
              <th pSortableColumn="nombre">
                  <div class="flex justify-content-between align-items-center">
                      Nombre
                      <p-sortIcon field="nombre"></p-sortIcon>
                  </div>
              </th>
              <th pSortableColumn="descripcion">
                  <div class="flex justify-content-between align-items-center">
                    Descripci√≥n
                      <p-sortIcon field="descripcion"></p-sortIcon>
                  </div>
              </th>
              <th pSortableColumn="sede_nombre">
                  <div class="flex justify-content-between align-items-center">
                      Sede
                      <p-sortIcon field="sede"></p-sortIcon>
                  </div>
              </th>
              <ng-template [ngIf]="Acciones ==1">
                  <th style="width: 5rem"> Editar</th>
              </ng-template>
              <ng-template [ngIf]="Acciones ==2">
                  <th style="width: 5rem"> Eliminar</th>
              </ng-template>
              <ng-template [ngIf]="Acciones ==3" >
                  <th style="width: 5rem" pSortableColumn="status"> Estados</th>
              </ng-template>
              
            
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-customer  let-rowData let-expanded="expanded">
          <tr class="p-selectable-row font-family"  [pSelectableRow]="rowData">
              <td>
                  {{customer.nombre | titlecase}}
              </td>
              <td>
                  {{customer?.descripcion | titlecase}}
              </td>
              <td>
                  {{customer?.sede_nombre| titlecase}}
              </td>
            
  
              <ng-template [ngIf]="Acciones ==1">
              <td style="text-align: center">
                  <button pButton type="button" (click)="editProduct(customer)"
                  class=" p-ripple 
                   p-button-rounded p-button p-button-warning" icon="pi pi-pencil
                  "></button>
              </td>
              </ng-template>
              <ng-template [ngIf]="Acciones ==2">
                  <td style="text-align: center">
                      <button pButton type="button" (click)="deleteProduct(customer)"
                      class=" p-ripple 
                       p-button-rounded p-button p-button-danger" 
                      icon="pi pi-trash"></button>
                  </td>
                  </ng-template>
                  <ng-template [ngIf]="Acciones ==3">
                      <td style="text-align: center">
                          <button pButton  class="p-button-rounded p-button-success" disabled *ngIf="customer?.estado == true" 
                          style="padding:5px;border-radius:2px">
                          <span [class]="'customer-badge status-' + customer?.estado">
                            {{customer?.status}}
                          </span>

                            
                          </button>
                          <button pButton  class="p-button-rounded p-button-danger" 
                          *ngIf="customer?.estado == false" 
                          
                          style="padding:5px;border-radius:2px" (click)="activar(customer)">
                            
                            <span [class]="'customer-badge status-' + customer?.estado">{{customer?.status}}</span>
                          </button>
                          
                      </td>
                      </ng-template>
          </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage" style="text-align: center;" class="font-family">
          <tr>
              <td colspan="8">No hay registros encontrados</td>
          </tr>
      </ng-template>
  </p-table>


</div>

</div>

<p-dialog [(visible)]="productDialog" [style]="{'height': 'auto','width': '50%'}" 
[resizable]="false" zindex="10000" 
[closable]="false" [closeOnEscape]="false" 
[maximizable]="true" appendTo="body"
[showHeader]="false"
[modal]="true" styleClass="p-fluid border-round">
<div class="flex flex-column align-items-center mb-3 mt-4 ng-tns-c38-5 ">
  <div class="font-medium text-2xl text-900 font-family">
      <i class="pi pi-palette text-blue-500 text-xl bg-blue-100 border-round p-2" 
      *ngIf="nombre != 'Modificar'"></i>
      <i class="pi pi-pencil text-orange-500 text-xl bg-blue-100 border-round p-2" *ngIf="nombre == 'Modificar'"></i>
      {{nombre}} Tipo Producto
  </div>
</div>
<!-- <ng-template pTemplate="content"> -->
    <div class="field font-family">
        <label for="name"><span style="color:red">( * )</span> Nombre</label>
        <input type="text" pInputText id="name" [(ngModel)]="producto.nombre" required autofocus />
        <small class="p-error" *ngIf="submitted && !producto.nombre">Nombre is required.</small>
    </div>
    <div class="field font-family">
      <label for="name"><span style="color:red">( * )</span> Descripci√≥n</label>
      <input type="text" pInputText id="name" [(ngModel)]="producto.descripcion" required autofocus />
      <small class="p-error" *ngIf="submitted && !producto.descripcion">Descripci√≥n is required.</small>
  </div>

<ng-template pTemplate="footer" class="titleCard" >
    <ng-template [ngIf]="motrar == false">
  <div style="text-align: center;">
    <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text font-family" 
    (click)="productDialog = false"></button>
    <button pButton pRipple label="Guardar" *ngIf="nombre != 'Modificar'"
    icon="pi pi-check" class="p-button-success font-family" 
    [disabled]="!producto.nombre || !producto.descripcion" (click)="Dialog1=true"></button>
    <button pButton pRipple label="Editar" *ngIf="nombre == 'Modificar'" icon="pi pi-check" class="p-button-success font-family" 
    [disabled]="!producto.nombre || !producto.descripcion" (click)="Dialog1=true"></button>
  </div>
</ng-template>

  <ng-template [ngIf]="motrar == true">
    <br>
    <br>
    <!-- <p-progressBar [value]="cargando"></p-progressBar> -->
    <!-- <div fxLayout="row" class="titleCard"style="margin-top: 20px;"> -->
      <p-progressBar mode="indeterminate"  [style]="{'height': '6px'}"></p-progressBar>

    <!-- </div> -->
  
  </ng-template>

  

</ng-template>
</p-dialog>

<p-confirmDialog acceptLabel="Si" rejectLabel="No" [transitionOptions]="'3ms'"
styleClass="font-family" [closeOnEscape]="false" [closable]="false" appendTo="body"
[style]="{'font-family':'Century Gothic'}"
 acceptButtonStyleClass="p-button-success font-family"
rejectButtonStyleClass="p-button-text font-family"
></p-confirmDialog>


<!-- <p-toast></p-toast> -->

<!-- guardar -->
<p-dialog [(visible)]="Dialog1" 
[style]="{'height': 'auto','width': '40%'}"[resizable]="false" zindex="10000"
 [showHeader]="false" [closeOnEscape]="false" [closable]="false"
 [maximizable]="true" appendTo="body"
[modal]="true" >
<br>
    <div class="flex flex-column mt-3 font-family" style="flex: 1">
        <div class="text-center">
            <i class="pi pi-exclamation-triangle" style="font-size: 3rem"></i>
            <h4>Esta seguro de Guardar ?</h4>
            <p>Si para continuar</p>
        </div>
    </div>

    <ng-template pTemplate="footer" class="titleCard" >
        <ng-template [ngIf]="motrar == false">
      <div style="text-align: center;">
        <button pButton pRipple label="Si" icon="pi pi-check" 
        class="p-button-success p-button-raised p-button-rounded font-family" (click)="saveProduct()"></button>
        <button pButton pRipple label="No"  style="color: rgb(31, 45, 64);" 
        class=" p-button-text font-family" icon="pi pi-times"  (click)="Dialog1 = false"  ></button>
      </div>
    </ng-template>

      <ng-template [ngIf]="motrar == true">
        <br>
        <br>
        <!-- <p-progressBar [value]="cargando"></p-progressBar> -->
        <!-- <div fxLayout="row" class="titleCard"style="margin-top: 20px;"> -->
          <p-progressBar mode="indeterminate"  [style]="{'height': '6px'}"></p-progressBar>
    
        <!-- </div> -->
      
      </ng-template>
    </ng-template>
</p-dialog>
</ng-template>


<ng-template [ngIf]="mostrarDialogo==true">
  <div class="p-fluid font-family">
    <div class="flex flex-column align-items-center mb-3 mt-4 ng-tns-c38-5 ">
        <div class="font-medium text-2xl text-900 font-family">
            <i class="pi pi-palette text-blue-500 text-xl bg-blue-100 border-round p-2" 
            *ngIf="nombre != 'Modificar'"></i>
            <i class="pi pi-pencil text-orange-500 text-xl bg-blue-100 border-round p-2" *ngIf="nombre == 'Modificar'"></i>
            {{nombre}} Tipo Producto
        </div>
      </div>
      <!-- <ng-template pTemplate="content"> -->
          <div class="field font-family">
              <label for="name"><span style="color:red">( * )</span> Nombre</label>
              <input type="text" pInputText id="name" [(ngModel)]="producto.nombre" required autofocus />
              <small class="p-error" *ngIf="submitted && !producto.nombre">Nombre is required.</small>
          </div>
          <div class="field font-family">
            <label for="name"><span style="color:red">( * )</span> Descripci√≥n</label>
            <input type="text" pInputText id="name" [(ngModel)]="producto.descripcion" required autofocus />
            <small class="p-error" *ngIf="submitted && !producto.descripcion">Descripci√≥n is required.</small>
        </div>
        <ng-template [ngIf]="motrar == false">


        <div style="text-align: center;display:flex;justify-content:center;margin-top: 10px;" 
        >
            <button pButton pRipple label="Cancelar" icon="pi pi-times" class="p-button-text font-family" 
            style="width:auto"
            (click)="cancelar()"></button>

            <button pButton pRipple label="Guardar" icon="pi pi-check" class="p-button-success font-family" style="width:auto"
            [disabled]="!producto.descripcion || !producto.descripcion" (click)="saveProduct()"></button>
            </div>
</ng-template>

<ng-template [ngIf]="motrar == true">
    <br>
    <br>
    <!-- <p-progressBar [value]="cargando"></p-progressBar> -->
    <!-- <div fxLayout="row" class="titleCard"style="margin-top: 20px;"> -->
      <p-progressBar mode="indeterminate"  [style]="{'height': '6px'}"></p-progressBar>

    <!-- </div> -->
  
  </ng-template>

  </div>
</ng-template>